<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form Pembayaran Infaq</title>

<!-- FONT LEXEND -->
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- BOOTSTRAP -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
* { font-family: 'Lexend', sans-serif; }
body { background: #f1f1f1; }

/* Wrapper */
.form-wrapper {
    max-width: 450px;
    width: 100%;
    margin: 30px auto;
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

label {
    font-weight: 700;
    text-align: center;
    width: 100%;
    display: block;
}

.form-wrapper .form-control,
.form-wrapper .btn {
    width: 100%;
}

#searchResult {
    position: absolute;
    background: white;
    width: 100%;
    z-index: 10;
    border-radius: 5px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    max-height: 180px;
    overflow-y: auto;
}

#searchResult div {
    padding: 8px 12px;
    cursor: pointer;
}

#searchResult div:hover {
    background: #e9ecef;
}
</style>
</head>
<body>

<div class="form-wrapper">
    <h4 class="text-center fw-bold mb-4">
        Form Konfirmasi Infaq<br>NDA Reguler Batch 11
    </h4>

    <!-- Nama Member -->
    <label for="namaMember">Nama Member</label>
    <div style="position: relative;">
        <input id="namaMember" type="text" class="form-control" autocomplete="off">
        <div id="searchResult"></div>
    </div>

    <label>Nomor WhatsApp</label>
    <input id="nomorWA" class="form-control" type="text">

    <label>Jenis Kelamin</label>
    <input id="jenisKelamin" class="form-control" type="text">

    <label>Nomor Kelas</label>
    <input id="nomorKelas" class="form-control" type="text">

    <label>Nama Mentor</label>
    <input id="namaMentor" class="form-control" type="text">

    <button id="resetBtn" class="btn btn-secondary mt-3">Reset Pilihan</button>
    <button id="submitBtn" class="btn btn-primary mt-2">Lanjut Isi di Google Form</button>
</div>

<script>
// ==================== LOAD DATA GOOGLE SHEETS ====================
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRJsoLmoRr2EWDG7b-vUI0DwEqtWb2RIlJgFY_oG0auz0KUd2P47g95dM3eyKn5Y1XMTfpiNlT3072j/pub?gid=0&single=true&output=tsv";

let dataSantri = [];

// Ambil data
fetch(sheetURL)
.then(res => res.text())
.then(txt => {
    const rows = txt.split("\n").map(r => r.split("\t"));
    rows.shift();
    dataSantri = rows.map(r => ({
        nama: r[0]?.trim(),
        wa: r[1]?.trim(),
        jk: r[2]?.trim(),
        kelas: r[3]?.trim(),
        mentor: r[4]?.trim()
    }));
});

// ==================== SEARCH ====================
const inputNama = document.getElementById("namaMember");
const searchResult = document.getElementById("searchResult");

inputNama.addEventListener("input", function() {
    const keyword = this.value.toLowerCase();
    searchResult.innerHTML = "";
    if (keyword.length < 1) return;

    const filtered = dataSantri.filter(s => s.nama.toLowerCase().includes(keyword));

    filtered.forEach(s => {
        const div = document.createElement("div");
        div.textContent = s.nama;
        div.onclick = () => {
            inputNama.value = s.nama;
            fillForm(s);
            searchResult.innerHTML = "";
        };
        searchResult.appendChild(div);
    });
});

// ==================== ISI FORM ====================
function fillForm(s) {
    document.getElementById("nomorWA").value = s.wa;
    document.getElementBy
